<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/product-detail.css">
</head>

<body>
  <%- include('../includes/navigation.ejs') %>
  <main>
    <% if (product) { %>
      <section>
        <div class='product-detail container d-none d-lg-block'>
          <div class='row'>
            <div class='col-6'>
              <h1 class='mb-3'><%= product.name %></h1>
              <hr>
              <p class='mt-3'><%= product.description %></p>
            </div>
            <div class="col-6 text-center">
              <img src="<%= product.image %>" alt="<%= product.name %>">
              <div class='container text-center my-3'>
                <div class="row">
                  <div class="col-6 d-flex align-items-center justify-content-center">
                    <p><%= product.price %> RON</p>
                  </div>
                  <div class="col-6">
                    <form class='w-100' action='/add-to-cart' method='POST'>
                      <button type='submit' class='button'>Adaugă în coș</button>
                      <input type="hidden" name='prodId' id='productId' value='<%= product.id %>'>
                      <input type="hidden" name="prodName" id='productName' value='<%= product.name %>'>
                      <input type="hidden" name="prodPrice" value='<%= product.price %>'>
                      <input type="hidden" name="prodImage" value='<%= product.image %>'>
                      <input type="hidden" name='url' value='/product/<%= product.id %>'>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class='product-detail d-flex d-lg-none flex-column justify-content-center align-items-center gap-3 w-100'>
          <h1><%= product.name %></h1>
          <div>
            <img src="<%= product.image %>" alt="<%= product.name %>">
          </div>
          <hr class='w-100'>
          <p><%= product.description %></p>
          <hr class='w-100'>
          <div class='d-flex flex-column gap-2 align-items-center justify-content-center'>
            <div>
              <p><%= product.price %> RON</p>
            </div>
            <div>
              <form class='w-100' action='/add-to-cart' method='POST'>
                <button type='submit' class='button'>Adaugă în coș</button>
                <input type="hidden" name='prodId' id='productId' value='<%= product.id %>'>
                <input type="hidden" name="prodName" id='productName' value='<%= product.name %>'>
                <input type="hidden" name="prodPrice" value='<%= product.price %>'>
                <input type="hidden" name="prodImage" value='<%= product.image %>'>
                <input type="hidden" name='url' value='/product/<%= product.id %>'>
              </form>
            </div>
          </div>
        </div>
      </section>

      <section class='custom-break d-flex align-self-center justify-content-center my-5'>
        <div class='d-flex align-self-center justify-content-center'>
          <p>Recenziile produsului</p>
        </div>
      </section>

      <section class='add-review mt-5'>
        <div>
          <p class='mb-3'>Adaugă o recenzie</p>
          <form action="/add-review" method="POST">
            <div class='d-flex flex-column align-items-center justify-content-center gap-3'>
              <textarea class='w-100' name="prodReview" id="productReview" cols="30" rows="10"></textarea>
              <div id='ratingButtonsContainer'>
                <button type='button' data-rating='1'>
                  <svg data-rating='1' xmlns="http://www.w3.org/2000/svg" width="44" height="44" fill="#333652" class="bi bi-star" viewBox="0 0 16 16">
                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                  </svg>
                </button>
                <button type='button' data-rating='2'>
                  <svg data-rating='2' xmlns="http://www.w3.org/2000/svg" width="44" height="44" fill="#333652" class="bi bi-star" viewBox="0 0 16 16">
                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                  </svg>
                </button>
                <button type='button' data-rating='3'>
                  <svg data-rating='3' xmlns="http://www.w3.org/2000/svg" width="44" height="44" fill="#333652" class="bi bi-star" viewBox="0 0 16 16">
                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                  </svg>
                </button>
                <button type='button' data-rating='4'>
                  <svg data-rating='4' xmlns="http://www.w3.org/2000/svg" width="44" height="44" fill="#333652" class="bi bi-star" viewBox="0 0 16 16">
                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                  </svg>
                </button>
                <button type='button' data-rating='5'>
                  <svg data-rating='5' xmlns="http://www.w3.org/2000/svg" width="44" height="44" fill="#333652" class="bi bi-star" viewBox="0 0 16 16">
                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                  </svg>
                </button>
                <input type="hidden" name="rating" id='rating' value='0'>
              </div>
              <p id='ratingText'></p>
              <input type="hidden" name="prodId" value='<%= product.id %>'>
              <button type='submit' class='button mt-4'>Trimite</button>
            </div>
          </form>
        </div>
      </section>

      <section class='reviews'>

      </section>
    <% } else { %>

    <% } %>
  </main>
  <script src='/js/product-detail.js'></script>
<%- include('../includes/end.ejs') %>